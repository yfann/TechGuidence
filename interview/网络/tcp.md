## tcp vs udp
+ 连接性和无连接性:
    + TCP是面向连接的协议，它建立一个双向的、可靠的通信连接，确保数据的顺序和完整性。在数据传输前，必须先建立连接。
    + UDP是面向无连接的协议，它不需要事先建立连接，直接发送数据包。因此，UDP通常更快，但不保证数据的可靠性。

+ 可靠性:
    + TCP保证数据的可靠性，通过确认机制、超时重传、错误检测和流量控制等手段，确保数据不丢失、不重复、不乱序。
        + TCP是一种可靠的传输协议，它通过序列号、确认机制和重传等技术来确保数据的可靠传输。
    + UDP不保证数据的可靠性，数据包发送后不会得到确认，也不会重传丢失的数据，可能存在数据丢失或乱序的情况。

+ 数据流模型:
    + TCP提供面向流的数据传输，数据被视为连续的字节流，无明显的分割。
    + UDP是面向数据报的，每个UDP数据包都是一个独立的单元，有明确的长度和边界。

+ 延迟和效率:
    + TCP需要建立连接、确认机制等，因此相对于UDP来说，会有一些额外的延迟和开销。
    + UDP没有连接建立和确认机制，因此传输效率更高，适用于一些实时性要求较高的应用，如实时游戏、音视频传输等。

+ 应用场景:
    + TCP适用于对数据传输的可靠性和顺序性要求较高的场景，如文件传输、网页浏览、电子邮件等。
    + UDP适用于对实时性要求较高，而对数据可靠性要求较低的场景，如实时通信、流媒体、VoIP等。

## 三次握手和四次挥手

+ 三次握手（Three-Way Handshake）三次握手的主要目的是确保客户端和服务器都认可对方的初始序列号和能力，建立起双方的信任和连接。
    + 第一次握手（SYN）：客户端发送一个SYN（同步）包，其中设置了初始序列号（ISN，Initial Sequence Number），表示客户端准备发送数据。
    + 第二次握手（SYN + ACK）：服务器收到客户端的SYN包后，确认接收并发送一个SYN和ACK（确认）包。在这个ACK中，服务器也设置了自己的初始序列号。
    + 第三次握手（ACK）：客户端收到服务器的SYN+ACK包后，确认接收，并发送一个ACK包给服务器，表示连接建立完成。此时，双方都已准备好传输数据。

+ 四次挥手（Four-Way Handshake） 四次挥手的目的是保证双方都完成了数据的传输，并告知对方自己准备关闭连接。因为TCP是全双工的，双方都有可能有数据要传输，所以关闭连接需要双方都完成数据传输后才能进行。
    + 第一次挥手（FIN）：客户端请求关闭连接，发送一个FIN包，表示不再发送数据。
    + 第二次挥手（ACK）：服务器收到客户端的FIN包后，发送一个ACK包，确认收到关闭请求。
    + 第三次挥手（FIN）：服务器自己的数据发送完毕后，会发送一个FIN包，表示准备关闭连接。
    + 第四次挥手（ACK）：客户端收到服务器的FIN包后，发送一个ACK包，确认收到关闭请求，此时连接完全关闭。

## 传输控制协议

+ SYN包（同步包）：
    + SYN代表“同步”，是TCP连接建立的第一步。
    + 当一个主机（通常是客户端）想要与另一个主机（通常是服务器）建立连接时，它会发送一个SYN包，其中包含一些连接参数，例如初始序列号。
    + 接收方收到SYN包后，会发送一个SYN-ACK包回应，表示接受连接请求，并且向发送方确认它也希望建立连接。
    + SYN包的主要作用是启动连接建立过程，并在初始步骤中进行参数交换。

+ ACK包（确认包）：
    + ACK代表“确认”，在TCP连接建立过程中和数据传输过程中都会使用。
    + 在连接建立过程中，发送方在收到接收方的SYN-ACK包后，会发送一个ACK包，表示连接已经建立，通信可以开始。
    + 在数据传输过程中，每当接收方成功收到数据后，都会发送一个带有ACK标志的包作为确认，表示已经成功接收了数据。
    + ACK包的主要作用是确认收到数据或者确认连接状态的变化。

## 有序传输
+ TCP通过使用序列号（Sequence Number）和确认号（Acknowledgment Number）来保证数据的有序传输。发送方为每个发送的字节分配一个序列号，而接收方在确认收到数据时，通过确认号告知发送方已经成功接收了哪些字节。这样，发送方就可以根据确认号得知哪些数据已经被接收，哪些还需要重新发送


## 快速重传
快速重传是TCP在接收到重复的确认时，快速触发重传的机制。当发送方发送一系列数据，并且接收方由于某些原因（比如网络丢包）未能正确收到其中某个数据段，接收方会向发送方发送一个确认号，指示它期望收到下一个未丢失的数据段。如果发送方收到三个连续的相同确认号，就会认为这个数据段丢失，然后立即重传这个丢失的数据段，而不必等待重传定时器超时。

## 拥塞控制
+ TCP的拥塞控制机制旨在避免网络拥塞，以确保整个网络的性能不会因为过多的数据流量而降低。TCP通过以下几种算法来实 现拥塞控制：
    1. 慢开始（Slow Start）： 在连接建立初期，发送方只发送少量数据，然后逐渐增加发送窗口的大小，以避免一开始就过多地发送数据导致网络拥塞。
    2. 拥塞避免（Congestion Avoidance）： 一旦网络出现拥塞，TCP会减小发送窗口的大小，以降低发送速率。然后，发送方逐渐增加发送窗口，但速率相对较慢，以防止再次引起拥塞。
    3. 快重传和快恢复（Fast Retransmit and Fast Recovery）： 当发送方收到连续的重复确认号时，它会认为发生了拥塞。此时，发送方会立即重传丢失的数据段，并且进入快恢复状态，而不是退回到慢开始状态。这有助于更快地恢复到适当的发送速率。


## TIME_WAIT 
+ 是TCP连接终止过程中的一种状态，它出现在连接的主动关闭方（通常是客户端）主动关闭连接后，用于确保网络中所有相关的数据包都被处理完毕。在这个状态下，连接不再传输数据，但仍然保持活动状态一段时间

+ TCP连接终止过程分为四个阶段：主动关闭、被动关闭、等待时间和超时。
    + 主动关闭（Active Close）： 主动关闭方（通常是客户端）发送一个FIN（Finish）标志来表示它不再发送数据。这意味着发送方已经发送完数据并希望关闭连接。
    + 被动关闭（Passive Close）： 被动关闭方（通常是服务器）收到FIN标志后，发送一个ACK（Acknowledgment）来确认收到，并表示它还可以发送数据。
    + 等待时间（TIME_WAIT）： 在被动关闭方发送ACK后，主动关闭方进入TIME_WAIT状态。在这个状态中，连接保持活动，等待一段时间，以确保在网络中的所有数据包都被处理完毕。这个等待时间是为了防止在关闭连接后的短时间内重新打开相同的连接，避免可能的混淆。
    + 超时： 在TIME_WAIT状态结束后，连接会正式关闭，资源被释放，连接的两端不再保持连接状态。

+ TIME_WAIT状态的存在和作用是为了处理网络中可能遗留的延迟数据包。当连接关闭后，可能仍然有数据包在网络中传播，这些数据包可能在关闭连接后被接收方接收。TIME_WAIT状态确保这些延迟的数据包可以被正确处理，而不会影响后续的连接。另外，它还有助于防止出现"端口耗尽"问题，即在短时间内频繁关闭和打开连接可能导致可用端口资源被用尽。