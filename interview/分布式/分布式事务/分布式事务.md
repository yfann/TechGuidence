#  分布式事务
+ 无法使用本地事务
+ 数据最终一致性

## 方案
+ 两阶段提交（Two-Phase Commit, 2PC）： 2PC 是一种经典的分布式事务协议，它涉及两个阶段：准备（Precommit）和提交（Commit）。虽然它能够保证数据的一致性，但在某些情况下，它可能会导致阻塞和单点故障问题。

+ 补偿事务（Compensating Transactions）： 这是一种通过在系统中引入补偿操作来处理分布式事务的方法。当一个事务失败时，系统会执行一系列逆向操作来回滚之前的操作。

+ TCC（Try-Confirm-Cancel）： TCC 是一种将分布式事务拆分为三个阶段的方法。首先是尝试阶段，然后是确认阶段，最后是取消阶段。这种方法允许在各个阶段执行业务逻辑和数据校验。

+ Saga模式： Saga 是一种将大事务拆分为一系列小的本地事务的方法。每个小事务都有一个相应的补偿操作，用于处理失败情况。Saga 模式可以通过实现各种协调和协作方式来实现，如 Choreography（协同式）和 Orchestration（编排式）。

+ 分布式数据库： 一些分布式数据库系统，如Google Spanner、CockroachDB等，内置了分布式事务支持，可以处理跨多个节点的事务。

+ 消息队列事务： 在消息队列系统中，一些解决方案允许你通过将消息和事务绑定在一起来实现分布式事务。例如，Apache Kafka 提供了事务支持。

+ 数据库XA协议： XA 是一种协议，用于在分布式环境中协调多个数据库的事务。它通常由事务管理器（Transaction Manager）和多个资源管理器（Resource Manager）组成。

+ 分布式事务中间件： 一些分布式事务中间件，如Seata、Hmily等，提供了用于处理分布式事务的工具和机制。
    + Seata
    + Hmily



## tips
+ 长事务

+ 保证至少执行一次
    + 重试+幂等

+ 阿里Seata

## ref
+ [万字长文漫谈分布式事务实现原理](https://zhuanlan.zhihu.com/p/648556608)
+ [分布式事务系列三：Saga](https://zhuanlan.zhihu.com/p/95852045)