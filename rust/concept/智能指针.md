# rust 智能指针

+ rust中的指针`&`,即引用或借用

+ 智能指针
    + String,Vec
    + struct
        + 包含指向数据的指针，长度等信息
        + 实现了Deref,Drop特征
            + Deref
                + 让智能指针像引用一样使用
            + Drop
                + 当智能指针超出作用域后自动调用
                + 数据回收


## Box<T>

<!-- 使用场景 -->
+ 特意的将数据分配在堆上
+ 数据较大时，又不想在转移所有权时进行数据拷贝
+ 类型的大小在编译期无法确定，但是我们又需要固定大小的类型时
```rust
enum List {
    Cons(i32, Box<List>),
    Nil,
}
```
+ 特征对象，用于说明对象实现了一个特征，而不是某个特定的类型
    + `Box<dyn trait>`

```rust
 let a = Box::new(3);
 let b=*a+1;
```

+ Box::leak
    + 在运行期初始化的值，但是可以全局有效，也就是和整个程序活得一样久

```rust
fn main() {
   let s = gen_static_str();
   println!("{}", s);
}

fn gen_static_str() -> &'static str{
    let mut s = String::new();
    s.push_str("hello, world");

    Box::leak(s.into_boxed_str())
}
```

## Deref
+ 解引用