# split brain

## fencing token
+ 获取锁： 当一个节点请求某个资源的锁时，锁管理服务（如 etcd 或 Zookeeper）会生成一个递增的 Fencing Token 并分配给该节点。

+ Token 校验： 节点在访问资源时，必须提供它当前持有的 Fencing Token。资源管理系统在处理请求时，会验证这个 Token 是否为最新的（即是否大于先前的 Token）。如果 Token 过期或不匹配，该请求将被拒绝。

+ 防止旧节点操作： 如果一个节点因网络分区等原因失去锁的控制，但仍试图操作资源，它只能使用过期的 Token。资源管理系统会识别出这些旧 Token，并阻止这些不合法的操作，从而防止脑裂问题。

+ 应用
    + 防止过期事务或分布式锁在网络分区恢复后继续修改数据。
    + 确保只有当前拥有写权限的节点可以对文件进行修改，防止多个节点同时写入数据。
    + 保证缓存更新的原子性和一致性，避免并发写操作导致的数据损坏。
