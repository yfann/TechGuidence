
## 数据库连接池耗尽
+ 未关闭连接：应用程序在使用完数据库连接后，没有正确地关闭连接。这会使连接保持在连接池中，不可用于其他请求，最终导致连接池耗尽。

+ 长时间的连接占用：某些操作可能需要较长时间才能完成，例如复杂的查询或事务。如果连接在执行这些操作期间一直被占用，其他请求无法获取到连接，从而导致连接池用尽。

+ 连接泄漏：如果应用程序中发生了异常，连接没有被正确地释放，就会发生连接泄漏。这些泄漏的连接将永远不会返回到连接池中，最终导致连接池耗尽。

+ 连接池配置不当：连接池的大小和配置可能不足以处理应用程序的负载。如果连接池的最大连接数设置得太低，它可能很容易耗尽。另外，连接池的配置参数如最小空闲连接数、连接超时等也需要根据应用程序的需求进行调整。

+ 突发流量：当应用程序遭遇到意外的高流量或大量并发请求时，连接池可能会快速用尽连接，特别是在配置不合理的情况下。

+ 数据库性能问题：数据库服务器的性能问题，如高负载、慢查询或死锁，可能导致连接池用尽，因为数据库无法及时释放连接。

<!-- 为了解决数据库连接池耗尽的问题，可以考虑以下几种方法： -->

+ 确保在使用完连接后及时关闭它们，使用try-with-resources或finally块确保连接被正确释放。

+ 使用连接池管理工具，例如Apache DBCP、HikariCP或C3P0，它们可以自动管理连接的创建和释放。

+ 调整连接池的配置参数，确保连接池大小足够满足应用程序的需求。

+ 实施连接超时和闲置连接回收策略，以防止连接被占用太长时间。

+ 监控数据库性能，确保数据库服务器能够处理应用程序的负载。

+ 编写健壮的错误处理代码，以应对异常情况，确保连接在任何情况下都能被正确释放。









## tips
+ 索引深度

## ref
+ [为什么MySQL单表不能超过2000万行](https://bbs.huaweicloud.com/blogs/399181?utm_source=zhihu&utm_medium=bbs-ex&utm_campaign=other&utm_content=content)
